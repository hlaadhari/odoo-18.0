<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue du tableau de bord STEG -->
    <record id="view_steg_dashboard_form" model="ir.ui.view">
        <field name="name">steg.dashboard.form</field>
        <field name="model">steg.dashboard</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Tableau de bord STEG" create="false" edit="false" delete="false">
                <header>
                    <button name="action_new_move_in" type="object" string="Nouvelle Entr√©e" class="btn-primary"/>
                    <button name="action_new_move_out" type="object" string="Nouvelle Sortie" class="btn-primary"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>üè¢ Syst√®me de Gestion des Stocks STEG</h1>
                        <h3>Tableau de bord - Soci√©t√© Tunisienne de l'√âlectricit√© et du Gaz</h3>
                    </div>
                    
                    <!-- Statistiques principales -->
                    <group string="üìä Statistiques">
                        <group>
                            <field name="total_products" string="Total Pi√®ces"/>
                            <field name="total_moves_today" string="Mouvements Aujourd'hui"/>
                        </group>
                        <group>
                            <field name="pending_validations" string="En Attente Validation"/>
                            <field name="total_divisions" string="Divisions Actives"/>
                        </group>
                    </group>

                    <!-- Alertes -->
                    <group string="‚ö†Ô∏è Alertes Stock">
                        <group>
                            <field name="low_stock_count" string="Stock Bas"/>
                            <field name="out_of_stock_count" string="Ruptures"/>
                        </group>
                        <group>
                            <button name="action_view_low_stock" type="object" string="Voir Stock Bas" class="btn-warning"/>
                            <button name="action_view_out_of_stock" type="object" string="Voir Ruptures" class="btn-danger"/>
                        </group>
                    </group>
                    
                    <!-- R√©partition par division -->
                    <group string="üè¢ R√©partition par Division">
                        <group>
                            <field name="telecom_products" string="T√©l√©com"/>
                            <field name="teleconduite_products" string="T√©l√©conduite"/>
                        </group>
                        <group>
                            <field name="scada_products" string="SCADA"/>
                            <field name="common_products" string="Communes"/>
                        </group>
                    </group>

                    <!-- Actions rapides -->
                    <group string="‚ö° Actions Rapides">
                        <group>
                            <button name="action_new_move_in" type="object" string="‚ûï Nouvelle Entr√©e" class="btn-success"/>
                            <button name="action_view_products" type="object" string="üì¶ G√©rer Pi√®ces" class="btn-primary"/>
                        </group>
                        <group>
                            <button name="action_new_move_out" type="object" string="‚ûñ Nouvelle Sortie" class="btn-danger"/>
                            <button name="action_view_moves" type="object" string="üìã Historique" class="btn-info"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action pour le tableau de bord -->
    <record id="action_steg_dashboard" model="ir.actions.act_window">
        <field name="name">Tableau de bord STEG</field>
        <field name="res_model">steg.dashboard</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
        <field name="context">{'form_view_initial_mode': 'readonly', 'default_id': 1}</field>
        <field name="res_id">1</field>
    </record>

    <!-- Menu principal STEG (remplace l'ancien) -->
    <record id="menu_steg_main" model="ir.ui.menu">
        <field name="name">STEG Stock</field>
        <field name="sequence">5</field>
        <field name="action" ref="action_steg_dashboard"/>
        <field name="web_icon">steg_stock_management,static/description/icon.png</field>
    </record>

    <!-- Sous-menus -->
    <menuitem id="menu_steg_operations" name="Op√©rations" parent="menu_steg_main" sequence="10"/>
    <menuitem id="menu_steg_config" name="Configuration" parent="menu_steg_main" sequence="20"/>
    
    <!-- Menus op√©rations -->
    <menuitem id="menu_steg_moves" name="Mouvements" parent="menu_steg_operations" action="action_steg_stock_move" sequence="10"/>
    <menuitem id="menu_steg_products_menu" name="Pi√®ces" parent="menu_steg_operations" action="action_steg_product" sequence="20"/>
    
    <!-- Menus configuration -->
    <menuitem id="menu_steg_divisions_menu" name="Divisions" parent="menu_steg_config" action="action_steg_division" sequence="10"/>
</odoo>